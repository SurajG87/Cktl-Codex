<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cocktail Manual</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0A0A0A;
            color: white;
            line-height: 1.6;
        }
        
        .app {
            min-height: 100vh;
            background: #0A0A0A;
        }
        
        /* Login Styles */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #0A0A0A 0%, #1A1A1A 100%);
        }
        
        .login-form {
            background: #1A1A1A;
            padding: 3rem;
            border-radius: 15px;
            border: 1px solid #333;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }
        
        .login-title {
            text-align: center;
            color: #FFB366;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .login-subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
        }
        
        .login-error {
            background: #ff4444;
            color: white;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .guest-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #333;
            text-align: center;
        }
        
        .guest-text {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .guest-button {
            background: #333;
            color: white;
            border: 1px solid #555;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            width: 100%;
        }
        
        .guest-button:hover {
            background: #444;
            border-color: #FFB366;
        }
        
        /* Header */
        .header {
            background: #1A1A1A;
            padding: 1rem;
            border-bottom: 1px solid #333;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .nav-user {
            margin-left: auto;
            color: #FFB366;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logout-btn {
            background: transparent;
            border: 1px solid #FFB366;
            color: #FFB366;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .logout-btn:hover {
            background: #FFB366;
            color: #0A0A0A;
        }
        
        .nav-button {
            background: #333;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .nav-button:hover {
            background: #444;
        }
        
        .nav-button.active {
            background: #FFB366;
            color: #0A0A0A;
        }
        
        .nav-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .page-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #FFB366;
        }
        
        /* Search and Filters */
        .search-section {
            background: #1A1A1A;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border: 1px solid #333;
        }
        
        .search-box {
            width: 100%;
            padding: 0.75rem;
            background: #333;
            border: 1px solid #555;
            border-radius: 6px;
            color: white;
            margin-bottom: 1rem;
        }
        
        .filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 0.5rem;
            background: #333;
            border: 1px solid #555;
            border-radius: 6px;
            color: white;
            min-width: 150px;
        }
        
        /* Recipe Grid */
        .recipes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .recipe-card {
            background: #1A1A1A;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #333;
            transition: transform 0.2s;
            cursor: pointer;
            position: relative;
        }
        
        .recipe-card:hover {
            transform: translateY(-2px);
            border-color: #FFB366;
        }
        
        .recipe-image {
            width: 100%;
            height: 200px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            background-size: cover;
            background-position: center;
        }
        
        .recipe-info {
            padding: 1rem;
        }
        
        .recipe-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .recipe-spirit {
            color: #FFB366;
            font-size: 0.9rem;
        }
        
        .delete-overlay {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(255, 68, 68, 0.9);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.25rem 0.5rem;
            cursor: pointer;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .recipe-card:hover .delete-overlay {
            opacity: 1;
        }
        
        /* Alphabet Sections */
        .alphabet-section {
            margin-bottom: 3rem;
        }
        
        .letter-header {
            font-size: 2rem;
            color: #FFB366;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #FFB366;
        }
        
        /* Alphabet Navigation */
        .alphabet-nav {
            position: fixed;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #1A1A1A;
            padding: 0.5rem;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            z-index: 90;
            border: 1px solid #333;
        }
        
        .alphabet-letter {
            color: #666;
            text-decoration: none;
            font-size: 0.8rem;
            cursor: pointer;
            padding: 0.25rem;
            text-align: center;
            border-radius: 3px;
            transition: all 0.2s;
        }
        
        .alphabet-letter:hover {
            color: #FFB366;
            background: #333;
        }
        
        .alphabet-letter.disabled {
            color: #333;
            cursor: not-allowed;
        }
        
        .alphabet-letter.active {
            color: #FFB366;
            background: #333;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
            border-top: 1px solid #333;
            color: #666;
        }
        
        .footer a {
            color: #FFB366;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        /* Form Styles */
        .form {
            background: #1A1A1A;
            padding: 2rem;
            border-radius: 10px;
            border: 1px solid #333;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #FFB366;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem;
            background: #333;
            border: 1px solid #555;
            borderRadius: 6px;
            color: white;
        }
        
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            background: #333;
            border: 1px solid #555;
            borderRadius: 6px;
            color: white;
            min-height: 100px;
            resize: vertical;
        }
        
        .button {
            background: #FFB366;
            color: #0A0A0A;
            border: none;
            padding: 0.75rem 1.5rem;
            borderRadius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }
        
        .button:hover {
            background: #FF8C42;
        }
        
        .button-secondary {
            background: #333;
            color: white;
        }
        
        .button-secondary:hover {
            background: #444;
        }
        
        .buttons-row {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        /* Image Upload */
        .image-upload {
            border: 2px dashed #555;
            borderRadius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s;
        }
        
        .image-upload:hover {
            border-color: #FFB366;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 300px;
            borderRadius: 8px;
            margin-top: 1rem;
        }
        
        /* List Manager */
        .list-manager {
            background: #1A1A1A;
            padding: 1.5rem;
            borderRadius: 8px;
            border: 1px solid #333;
            margin-bottom: 1rem;
        }
        
        .list-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            background: #333;
            borderRadius: 6px;
            margin-bottom: 0.5rem;
        }
        
        .list-item:hover {
            background: #444;
        }
        
        .drag-handle {
            cursor: grab;
            padding: 0.5rem;
            color: #666;
        }
        
        .delete-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            borderRadius: 4px;
            cursor: pointer;
        }
        
        /* Settings Grid */
        .settings-grid {
            display: grid;
            gridTemplateColumns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
        
        /* Scale Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal {
            background: #1A1A1A;
            borderRadius: 10px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid #333;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .recipes-grid {
                gridTemplateColumns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .filters {
                flex-direction: column;
            }
            
            .filter-select {
                min-width: auto;
            }
            
            .settings-grid {
                gridTemplateColumns: 1fr;
            }
            
            .alphabet-nav {
                display: none;
            }
            
            .nav {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .nav-user {
                margin-left: 0;
                margin-top: 1rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Authentication configuration - CHANGE THESE TO YOUR CREDENTIALS
        const ADMIN_CREDENTIALS = {
            username: 'suraj',
            password: 'cocktail123'
        };
        
        // Mock data storage
        let mockRecipes = [
            {
                id: '1',
                name: 'Aviation',
                spirit_type: 'Gin',
                venue: 'Main Bar',
                glass_type: 'Coupe',
                abv: 28,
                pour_cost: 4.25,
                image_url: '',
                ingredients: [
                    { name: 'Gin', amount: 45, unit: 'ml' },
                    { name: 'Maraschino Liqueur', amount: 15, unit: 'ml' },
                    { name: 'Crème de Violette', amount: 15, unit: 'ml' },
                    { name: 'Lemon Juice', amount: 30, unit: 'ml' }
                ],
                instructions: 'Shake all ingredients with ice. Strain into chilled coupe glass. Garnish with a cherry.',
                notes: 'Classic pre-prohibition cocktail with a beautiful purple hue.'
            },
            {
                id: '2',
                name: 'Boulevardier',
                spirit_type: 'Whiskey',
                venue: 'Lounge',
                glass_type: 'Rocks',
                abv: 26,
                pour_cost: 5.50,
                image_url: '',
                ingredients: [
                    { name: 'Bourbon', amount: 45, unit: 'ml' },
                    { name: 'Campari', amount: 30, unit: 'ml' },
                    { name: 'Sweet Vermouth', amount: 30, unit: 'ml' },
                    { name: 'Orange Twist', amount: 1, unit: 'piece' }
                ],
                instructions: 'Stir all ingredients with ice. Strain over large ice cube. Express orange twist over drink.',
                notes: 'Whiskey-based version of the Negroni.'
            }
            // ... (other cocktail recipes remain the same, shortened for brevity)
        ];

        let mockSyrups = [
            {
                id: '1',
                name: 'Simple Syrup',
                cost: 2.50,
                image_url: '',
                ingredients: [
                    { name: 'Sugar', amount: 200, unit: 'g' },
                    { name: 'Water', amount: 200, unit: 'ml' }
                ],
                instructions: 'Heat water and sugar in a saucepan over medium heat. Stir until sugar is completely dissolved. Do not boil. Remove from heat and let cool completely before storing.'
            }
        ];

        let mockSettings = {
            spirit_types: ['Vodka', 'Gin', 'Rum', 'Tequila', 'Whiskey', 'Brandy', 'Mezcal'],
            glass_types: ['Coupe', 'Martini', 'Highball', 'Rocks', 'Collins', 'Hurricane'],
            venues: ['Main Bar', 'Pool Bar', 'Restaurant', 'Lounge']
        };

        // Utility function to convert image to base64
        const convertImageToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        };

        // Authentication Hook
        function useAuth() {
            const [user, setUser] = useState(null);
            
            useEffect(() => {
                // Check if user is logged in from localStorage
                const savedUser = localStorage.getItem('cocktailAppUser');
                if (savedUser) {
                    setUser(JSON.parse(savedUser));
                }
            }, []);
            
            const login = (username, password) => {
                if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                    const userData = { username, isAdmin: true };
                    setUser(userData);
                    localStorage.setItem('cocktailAppUser', JSON.stringify(userData));
                    return true;
                }
                return false;
            };
            
            const loginAsGuest = () => {
                const guestUser = { username: 'Guest', isAdmin: false };
                setUser(guestUser);
                localStorage.setItem('cocktailAppUser', JSON.stringify(guestUser));
                return true;
            };
            
            const logout = () => {
                setUser(null);
                localStorage.removeItem('cocktailAppUser');
            };
            
            return { user, login, loginAsGuest, logout };
        }

        // List Manager Component
        function ListManager({ title, items, onUpdate, placeholder, canEdit }) {
            const [newItem, setNewItem] = useState('');
            const [localItems, setLocalItems] = useState(items || []);

            useEffect(() => {
                setLocalItems(items || []);
            }, [items]);

            const addItem = () => {
                if (newItem.trim() && !localItems.includes(newItem.trim())) {
                    const updated = [...localItems, newItem.trim()];
                    setLocalItems(updated);
                    onUpdate(updated);
                    setNewItem('');
                }
            };

            const removeItem = (index) => {
                const updated = localItems.filter((_, i) => i !== index);
                setLocalItems(updated);
                onUpdate(updated);
            };

            const moveItem = (fromIndex, toIndex) => {
                const updated = [...localItems];
                const [movedItem] = updated.splice(fromIndex, 1);
                updated.splice(toIndex, 0, movedItem);
                setLocalItems(updated);
                onUpdate(updated);
            };

            return (
                <div className="list-manager">
                    <h3 style={{ color: '#FFB366', marginBottom: '1rem' }}>{title}</h3>
                    {canEdit && (
                        <div style={{ display: 'flex', gap: '0.5rem', marginBottom: '1rem' }}>
                            <input
                                type="text"
                                className="form-input"
                                value={newItem}
                                onChange={(e) => setNewItem(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && addItem()}
                                placeholder={placeholder}
                            />
                            <button type="button" className="button" onClick={addItem}>
                                Add
                            </button>
                        </div>
                    )}
                    <div>
                        {localItems.map((item, index) => (
                            <div key={index} className="list-item">
                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', flex: 1 }}>
                                    {canEdit && (
                                        <span 
                                            className="drag-handle"
                                            draggable
                                            onDragStart={(e) => e.dataTransfer.setData('text/plain', index)}
                                            onDragOver={(e) => e.preventDefault()}
                                            onDrop={(e) => {
                                                e.preventDefault();
                                                const fromIndex = parseInt(e.dataTransfer.getData('text/plain'));
                                                moveItem(fromIndex, index);
                                            }}
                                        >
                                            ⋮⋮
                                        </span>
                                    )}
                                    <span>{item}</span>
                                </div>
                                {canEdit && (
                                    <button 
                                        type="button" 
                                        className="delete-btn"
                                        onClick={() => removeItem(index)}
                                    >
                                        Delete
                                    </button>
                                )}
                            </div>
                        ))}
                    </div>
                    {localItems.length === 0 && (
                        <p style={{ textAlign: 'center', color: '#666', padding: '1rem' }}>
                            No items yet. {canEdit ? 'Add your first one above.' : 'No items available.'}
                        </p>
                    )}
                </div>
            );
        }

        // Scale Modal Component
        function ScaleModal({ recipe, onClose }) {
            const [scalingMethod, setScalingMethod] = useState('servings');
            const [quantity, setQuantity] = useState('1');
            const [dilution, setDilution] = useState('0');

            const calculateScaled = () => {
                const qty = parseFloat(quantity) || 1;
                const dilutionPercent = parseFloat(dilution) || 0;

                let scaledIngredients = [];
                
                if (scalingMethod === 'servings') {
                    scaledIngredients = recipe.ingredients.map(ing => ({
                        ...ing,
                        scaled_amount: (ing.amount * qty).toFixed(1)
                    }));
                } else {
                    const totalVolume = recipe.ingredients.reduce((sum, ing) => {
                        return sum + (ing.unit === 'ml' ? ing.amount : 0);
                    }, 0);
                    
                    const scaleFactor = qty / totalVolume;
                    scaledIngredients = recipe.ingredients.map(ing => ({
                        ...ing,
                        scaled_amount: (ing.amount * scaleFactor).toFixed(1)
                    }));
                }

                return scaledIngredients;
            };

            const scaledIngredients = calculateScaled();

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={e => e.stopPropagation()}>
                        <h2 style={{ color: '#FFB366', marginBottom: '1rem' }}>
                            Scale Recipe: {recipe.name}
                        </h2>
                        
                        <div className="form-group">
                            <label className="form-label">Scaling Method</label>
                            <select 
                                className="form-input"
                                value={scalingMethod}
                                onChange={(e) => setScalingMethod(e.target.value)}
                            >
                                <option value="servings">By Servings</option>
                                <option value="volume">By Total Volume (ml)</option>
                            </select>
                        </div>

                        <div className="form-group">
                            <label className="form-label">
                                {scalingMethod === 'servings' ? 'Number of Servings' : 'Total Volume (ml)'}
                            </label>
                            <input
                                type="number"
                                className="form-input"
                                value={quantity}
                                onChange={(e) => setQuantity(e.target.value)}
                                min="1"
                                step="1"
                            />
                        </div>

                        <div className="form-group">
                            <label className="form-label">Dilution (%)</label>
                            <input
                                type="number"
                                className="form-input"
                                value={dilution}
                                onChange={(e) => setDilution(e.target.value)}
                                min="0"
                                max="100"
                                step="5"
                            />
                        </div>

                        <div style={{ marginTop: '2rem' }}>
                            <h3 style={{ color: '#FFB366', marginBottom: '1rem' }}>Scaled Ingredients</h3>
                            <div style={{ background: '#333', padding: '1rem', borderRadius: '6px' }}>
                                {scaledIngredients.map((ing, index) => (
                                    <div key={index} style={{ padding: '0.25rem 0' }}>
                                        • {ing.scaled_amount} {ing.unit} {ing.name}
                                    </div>
                                ))}
                                {parseFloat(dilution) > 0 && (
                                    <div style={{ padding: '0.25rem 0', borderTop: '1px solid #555', marginTop: '0.5rem' }}>
                                        • Add {dilution}% dilution water
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="buttons-row">
                            <button className="button button-secondary" onClick={onClose}>
                                Close
                            </button>
                            <button className="button" onClick={() => {
                                const text = scaledIngredients.map(ing => 
                                    `${ing.scaled_amount}${ing.unit} ${ing.name}`
                                ).join('\n');
                                navigator.clipboard.writeText(text);
                                alert('Scaled recipe copied to clipboard!');
                            }}>
                                Copy to Clipboard
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Login Component
        function LoginPage({ onLogin, onGuestLogin }) {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [isLoading, setIsLoading] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setIsLoading(true);

                // Simulate API call delay
                setTimeout(() => {
                    if (onLogin(username, password)) {
                        // Login successful
                    } else {
                        setError('Invalid username or password');
                    }
                    setIsLoading(false);
                }, 1000);
            };

            const handleGuestLogin = () => {
                onGuestLogin();
            };

            return (
                <div className="login-container">
                    <form className="login-form" onSubmit={handleSubmit}>
                        <h1 className="login-title">🍸 Cocktail Manual</h1>
                        <p className="login-subtitle">Sign in to access admin features</p>
                        
                        {error && (
                            <div className="login-error">
                                {error}
                            </div>
                        )}
                        
                        <div className="form-group">
                            <label className="form-label">Username</label>
                            <input
                                type="text"
                                className="form-input"
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                                required
                                placeholder="Enter your username"
                            />
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Password</label>
                            <input
                                type="password"
                                className="form-input"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                required
                                placeholder="Enter your password"
                            />
                        </div>
                        
                        <button 
                            type="submit" 
                            className="button"
                            style={{ width: '100%' }}
                            disabled={isLoading}
                        >
                            {isLoading ? 'Signing In...' : 'Sign In as Admin'}
                        </button>
                        
                        <div className="guest-section">
                            <p className="guest-text">Just want to browse the cocktails?</p>
                            <button 
                                type="button" 
                                className="guest-button"
                                onClick={handleGuestLogin}
                            >
                                Continue as Guest
                            </button>
                            <p style={{ color: '#666', fontSize: '0.8rem', marginTop: '1rem' }}>
                                Guest users can view all cocktails but cannot add or delete recipes.
                            </p>
                        </div>
                    </form>
                </div>
            );
        }

        // Main App Component
        function App() {
            const { user, login, loginAsGuest, logout } = useAuth();
            const [currentPage, setCurrentPage] = useState('home');
            const [selectedRecipe, setSelectedRecipe] = useState(null);
            const [selectedSyrup, setSelectedSyrup] = useState(null);
            const [showScaleModal, setShowScaleModal] = useState(false);
            
            // Redirect to login if not authenticated and trying to access protected pages
            useEffect(() => {
                if (!user && (currentPage === 'create-recipe' || currentPage === 'settings')) {
                    setCurrentPage('home');
                }
            }, [user, currentPage]);
            
            const navigateTo = (page, item = null) => {
                // Prevent navigation to protected pages if not admin
                if ((page === 'create-recipe' || page === 'settings') && (!user || !user.isAdmin)) {
                    return;
                }
                setCurrentPage(page);
                if (page === 'view-recipe') setSelectedRecipe(item);
                if (page === 'view-syrup') setSelectedSyrup(item);
            };
            
            const handleDeleteRecipe = (recipeId) => {
                if (!user || !user.isAdmin) return;
                
                if (confirm('Are you sure you want to delete this cocktail?')) {
                    mockRecipes = mockRecipes.filter(recipe => recipe.id !== recipeId);
                    // Force re-render by navigating away and back
                    setCurrentPage('home');
                    setTimeout(() => setCurrentPage('home'), 100);
                }
            };
            
            const handleDeleteSyrup = (syrupId) => {
                if (!user || !user.isAdmin) return;
                
                if (confirm('Are you sure you want to delete this syrup?')) {
                    mockSyrups = mockSyrups.filter(syrup => syrup.id !== syrupId);
                    setCurrentPage('syrups');
                    setTimeout(() => setCurrentPage('syrups'), 100);
                }
            };
            
            const renderPage = () => {
                if (!user) {
                    return <LoginPage onLogin={login} onGuestLogin={loginAsGuest} />;
                }
                
                switch(currentPage) {
                    case 'home':
                        return <HomePage 
                            onRecipeClick={(recipe) => navigateTo('view-recipe', recipe)}
                            onDeleteRecipe={handleDeleteRecipe}
                            isAdmin={user.isAdmin}
                        />;
                    case 'view-recipe':
                        return <ViewRecipePage 
                            recipe={selectedRecipe} 
                            onBack={() => navigateTo('home')}
                            onScale={() => setShowScaleModal(true)}
                            isAdmin={user.isAdmin}
                            onDeleteRecipe={handleDeleteRecipe}
                        />;
                    case 'create-recipe':
                        return <CreateRecipePage 
                            onBack={() => navigateTo('home')} 
                            onSave={(newRecipe) => {
                                mockRecipes.push({...newRecipe, id: Date.now().toString()});
                                navigateTo('home');
                            }}
                        />;
                    case 'syrups':
                        return <SyrupsPage 
                            onSyrupClick={(syrup) => navigateTo('view-syrup', syrup)}
                            onCreateSyrup={() => navigateTo('create-syrup')}
                            onDeleteSyrup={handleDeleteSyrup}
                            isAdmin={user.isAdmin}
                        />;
                    case 'view-syrup':
                        return <ViewSyrupPage 
                            syrup={selectedSyrup} 
                            onBack={() => navigateTo('syrups')}
                            isAdmin={user.isAdmin}
                            onDeleteSyrup={handleDeleteSyrup}
                        />;
                    case 'create-syrup':
                        return <CreateSyrupPage 
                            onBack={() => navigateTo('syrups')}
                            onSave={(newSyrup) => {
                                mockSyrups.push({...newSyrup, id: Date.now().toString()});
                                navigateTo('syrups');
                            }}
                        />;
                    case 'settings':
                        return <SettingsPage 
                            onBack={() => navigateTo('home')} 
                            isAdmin={user.isAdmin}
                        />;
                    default:
                        return <HomePage 
                            onRecipeClick={(recipe) => navigateTo('view-recipe', recipe)}
                            onDeleteRecipe={handleDeleteRecipe}
                            isAdmin={user.isAdmin}
                        />;
                }
            };
            
            if (!user) {
                return <LoginPage onLogin={login} onGuestLogin={loginAsGuest} />;
            }
            
            return (
                <div className="app">
                    <header className="header">
                        <nav className="nav">
                            <button 
                                className={`nav-button ${currentPage === 'home' ? 'active' : ''}`}
                                onClick={() => navigateTo('home')}
                            >
                                🍸 Cocktail Manual
                            </button>
                            <button 
                                className={`nav-button ${currentPage === 'create-recipe' ? 'active' : ''} ${
                                    !user.isAdmin ? 'disabled' : ''
                                }`}
                                onClick={() => navigateTo('create-recipe')}
                                title={!user.isAdmin ? 'Admin access required' : ''}
                            >
                                ➕ Add Recipe
                            </button>
                            <button 
                                className={`nav-button ${currentPage === 'syrups' ? 'active' : ''}`}
                                onClick={() => navigateTo('syrups')}
                            >
                                🧪 Syrups & Infusions
                            </button>
                            <button 
                                className={`nav-button ${currentPage === 'settings' ? 'active' : ''} ${
                                    !user.isAdmin ? 'disabled' : ''
                                }`}
                                onClick={() => navigateTo('settings')}
                                title={!user.isAdmin ? 'Admin access required' : ''}
                            >
                                ⚙️ Settings
                            </button>
                            
                            <div className="nav-user">
                                👤 {user.username}
                                {user.isAdmin && <span style={{color: '#FFB366', fontSize: '0.7rem'}}> (Admin)</span>}
                                {!user.isAdmin && <span style={{color: '#666', fontSize: '0.7rem'}}> (Guest)</span>}
                                <button className="logout-btn" onClick={logout}>
                                    Logout
                                </button>
                            </div>
                        </nav>
                    </header>
                    
                    <main>
                        {renderPage()}
                    </main>

                    <footer className="footer">
                        <p>
                            Cocktail Manual © {new Date().getFullYear()} | Created by{' '}
                            <a href="https://www.instagram.com/suraj.gg87/" target="_blank" rel="noopener noreferrer">
                                @suraj.gg87
                            </a>
                        </p>
                    </footer>

                    {showScaleModal && selectedRecipe && (
                        <ScaleModal 
                            recipe={selectedRecipe}
                            onClose={() => setShowScaleModal(false)}
                        />
                    )}
                </div>
            );
        }
        
        // Home Page Component
        function HomePage({ onRecipeClick, onDeleteRecipe, isAdmin }) {
            const [searchQuery, setSearchQuery] = useState('');
            const [activeSpirit, setActiveSpirit] = useState('all');
            const [activeVenue, setActiveVenue] = useState('all');
            
            // Sort recipes alphabetically by name
            const sortedRecipes = [...mockRecipes].sort((a, b) => a.name.localeCompare(b.name));
            
            const filteredRecipes = sortedRecipes.filter(recipe => {
                const searchMatch = recipe.name.toLowerCase().includes(searchQuery.toLowerCase());
                const spiritMatch = activeSpirit === 'all' || recipe.spirit_type === activeSpirit;
                const venueMatch = activeVenue === 'all' || recipe.venue === activeVenue;
                return searchMatch && spiritMatch && venueMatch;
            });
            
            // Group recipes by first letter
            const recipeGroups = {};
            filteredRecipes.forEach(recipe => {
                const firstLetter = recipe.name.charAt(0).toUpperCase();
                if (!recipeGroups[firstLetter]) {
                    recipeGroups[firstLetter] = [];
                }
                recipeGroups[firstLetter].push(recipe);
            });
            
            const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
            
            const scrollToLetter = (letter) => {
                const element = document.getElementById(`letter-${letter}`);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };
            
            return (
                <div className="container">
                    <h1 className="page-title"></h1>
                    
                    <div className="search-section">
                        <input
                            type="text"
                            className="search-box"
                            placeholder="Search cocktails..."
                            value={searchQuery}
                            onChange={(e) => setSearchQuery(e.target.value)}
                        />
                        
                        <div className="filters">
                            <select 
                                className="filter-select"
                                value={activeSpirit}
                                onChange={(e) => setActiveSpirit(e.target.value)}
                            >
                                <option value="all">All Spirits</option>
                                {mockSettings.spirit_types.map(spirit => (
                                    <option key={spirit} value={spirit}>{spirit}</option>
                                ))}
                            </select>
                            
                            <select 
                                className="filter-select"
                                value={activeVenue}
                                onChange={(e) => setActiveVenue(e.target.value)}
                            >
                                <option value="all">All Venues</option>
                                {mockSettings.venues.map(venue => (
                                    <option key={venue} value={venue}>{venue}</option>
                                ))}
                            </select>
                        </div>
                    </div>
                    
                    {filteredRecipes.length === 0 ? (
                        <div className="loading">
                            <p>No cocktails found. Try adjusting your search or filters.</p>
                        </div>
                    ) : (
                        <div>
                            {alphabet.map(letter => (
                                recipeGroups[letter] && recipeGroups[letter].length > 0 && (
                                    <div key={letter} className="alphabet-section" id={`letter-${letter}`}>
                                        <h2 className="letter-header">{letter}</h2>
                                        <div className="recipes-grid">
                                            {recipeGroups[letter].map(recipe => (
                                                <div 
                                                    key={recipe.id} 
                                                    className="recipe-card"
                                                    onClick={() => onRecipeClick(recipe)}
                                                >
                                                    {isAdmin && (
                                                        <button 
                                                            className="delete-overlay"
                                                            onClick={(e) => {
                                                                e.stopPropagation();
                                                                onDeleteRecipe(recipe.id);
                                                            }}
                                                            title="Delete cocktail"
                                                        >
                                                            Delete
                                                        </button>
                                                    )}
                                                    <div 
                                                        className="recipe-image"
                                                        style={{ 
                                                            backgroundImage: recipe.image_url ? `url(${recipe.image_url})` : 'none',
                                                            backgroundSize: 'cover',
                                                            backgroundPosition: 'center'
                                                        }}
                                                    >
                                                        {!recipe.image_url && '🍸'}
                                                    </div>
                                                    <div className="recipe-info">
                                                        <div className="recipe-name">{recipe.name}</div>
                                                        <div className="recipe-spirit">{recipe.spirit_type}</div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )
                            ))}
                        </div>
                    )}
                    
                    {/* Alphabet Navigation */}
                    <div className="alphabet-nav">
                        {alphabet.map(letter => (
                            <span 
                                key={letter}
                                className={`alphabet-letter ${
                                    recipeGroups[letter] && recipeGroups[letter].length > 0 ? '' : 'disabled'
                                }`}
                                onClick={() => recipeGroups[letter] && recipeGroups[letter].length > 0 && scrollToLetter(letter)}
                            >
                                {letter}
                            </span>
                        ))}
                    </div>
                </div>
            );
        }
        
        // View Recipe Page Component
        function ViewRecipePage({ recipe, onBack, onScale, isAdmin, onDeleteRecipe }) {
            if (!recipe) {
                return (
                    <div className="container">
                        <button className="button button-secondary" onClick={onBack}>← Back</button>
                        <div className="loading">Recipe not found</div>
                    </div>
                );
            }
            
            return (
                <div className="container">
                    <div style={{ display: 'flex', gap: '1rem', alignItems: 'center', marginBottom: '1rem' }}>
                        <button className="button button-secondary" onClick={onBack}>← Back to Cocktails</button>
                        {isAdmin && (
                            <button 
                                className="button"
                                style={{ background: '#ff4444' }}
                                onClick={() => onDeleteRecipe(recipe.id)}
                            >
                                Delete Cocktail
                            </button>
                        )}
                    </div>
                    
                    <div style={{ marginTop: '2rem', background: '#1A1A1A', padding: '2rem', borderRadius: '10px', border: '1px solid #333' }}>
                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 2fr', gap: '2rem', marginBottom: '2rem' }}>
                            <div>
                                <div 
                                    className="recipe-image"
                                    style={{ 
                                        backgroundImage: recipe.image_url ? `url(${recipe.image_url})` : 'none',
                                        height: '300px',
                                        borderRadius: '8px'
                                    }}
                                >
                                    {!recipe.image_url && '🍸'}
                                </div>
                            </div>
                            <div>
                                <h1 style={{ fontSize: '2.5rem', marginBottom: '1rem', color: '#FFB366' }}>{recipe.name}</h1>
                                
                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '1rem', marginBottom: '2rem' }}>
                                    <div>
                                        <strong style={{ color: '#FFB366' }}>Spirit:</strong> {recipe.spirit_type}
                                    </div>
                                    <div>
                                        <strong style={{ color: '#FFB366' }}>Glass:</strong> {recipe.glass_type}
                                    </div>
                                    <div>
                                        <strong style={{ color: '#FFB366' }}>Venue:</strong> {recipe.venue}
                                    </div>
                                    <div>
                                        <strong style={{ color: '#FFB366' }}>ABV:</strong> {recipe.abv}%
                                    </div>
                                    <div>
                                        <strong style={{ color: '#FFB366' }}>Cost:</strong> ${recipe.pour_cost}
                                    </div>
                                </div>
                                
                                <div className="buttons-row">
                                    <button className="button" onClick={onScale}>
                                        Scale Recipe
                                    </button>
                                    <button className="button button-secondary" onClick={() => {
                                        const text = `Recipe: ${recipe.name}\n\nIngredients:\n${recipe.ingredients.map(ing => `• ${ing.amount}${ing.unit} ${ing.name}`).join('\n')}\n\nInstructions:\n${recipe.instructions}`;
                                        navigator.clipboard.writeText(text);
                                        alert('Recipe copied to clipboard!');
                                    }}>
                                        Share Recipe
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div style={{ marginBottom: '2rem' }}>
                            <h2 style={{ color: '#FFB366', marginBottom: '1rem' }}>Ingredients</h2>
                            <div style={{ background: '#333', padding: '1rem', borderRadius: '6px' }}>
                                {recipe.ingredients.map((ing, index) => (
                                    <div key={index} style={{ padding: '0.25rem 0' }}>
                                        • {ing.amount} {ing.unit} {ing.name}
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        <div style={{ marginBottom: '2rem' }}>
                            <h2 style={{ color: '#FFB366', marginBottom: '1rem' }}>Instructions</h2>
                            <div style={{ background: '#333', padding: '1rem', borderRadius: '6px', whiteSpace: 'pre-line' }}>
                                {recipe.instructions}
                            </div>
                        </div>
                        
                        {recipe.notes && (
                            <div>
                                <h2 style={{ color: '#FFB366', marginBottom: '1rem' }}>Notes</h2>
                                <div style={{ background: '#333', padding: '1rem', borderRadius: '6px', fontStyle: 'italic' }}>
                                    {recipe.notes}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        // Create Recipe Page Component
        function CreateRecipePage({ onBack, onSave }) {
            const [formData, setFormData] = useState({
                name: '',
                spirit_type: '',
                venue: '',
                glass_type: '',
                abv: '',
                pour_cost: '',
                image_url: '',
                ingredients: [{ name: '', amount: '', unit: 'ml' }],
                instructions: '',
                notes: ''
            });
            
            const [imageFile, setImageFile] = useState(null);
            
            const handleImageUpload = async (event) => {
                const file = event.target.files[0];
                if (file) {
                    setImageFile(file);
                    try {
                        const base64 = await convertImageToBase64(file);
                        setFormData(prev => ({ ...prev, image_url: base64 }));
                    } catch (error) {
                        console.error('Error converting image:', error);
                        alert('Error uploading image');
                    }
                }
            };
            
            const addIngredient = () => {
                setFormData(prev => ({
                    ...prev,
                    ingredients: [...prev.ingredients, { name: '', amount: '', unit: 'ml' }]
                }));
            };
            
            const updateIngredient = (index, field, value) => {
                setFormData(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.map((ing, i) => 
                        i === index ? { ...ing, [field]: value } : ing
                    )
                }));
            };
            
            const removeIngredient = (index) => {
                setFormData(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.filter((_, i) => i !== index)
                }));
            };
            
            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(formData);
            };
            
            return (
                <div className="container">
                    <button className="button button-secondary" onClick={onBack}>← Back</button>
                    
                    <form className="form" onSubmit={handleSubmit}>
                        <h1 className="page-title">Create New Cocktail</h1>
                        
                        <div className="form-group">
                            <label className="form-label">Cocktail Image</label>
                            <div className="image-upload">
                                <input
                                    type="file"
                                    accept="image/*"
                                    onChange={handleImageUpload}
                                    style={{ display: 'none' }}
                                    id="image-upload"
                                />
                                <label htmlFor="image-upload" style={{ cursor: 'pointer' }}>
                                    {formData.image_url ? (
                                        <img 
                                            src={formData.image_url} 
                                            alt="Preview" 
                                            className="image-preview"
                                        />
                                    ) : (
                                        <div>
                                            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>📷</div>
                                            <p>Click to upload an image</p>
                                            <p style={{ fontSize: '0.9rem', color: '#666' }}>
                                                or paste image URL below
                                            </p>
                                        </div>
                                    )}
                                </label>
                            </div>
                            <input
                                type="text"
                                className="form-input"
                                style={{ marginTop: '1rem' }}
                                placeholder="Or enter image URL..."
                                value={formData.image_url}
                                onChange={(e) => setFormData(prev => ({ ...prev, image_url: e.target.value }))}
                            />
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Cocktail Name</label>
                            <input
                                type="text"
                                className="form-input"
                                value={formData.name}
                                onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
                                required
                            />
                        </div>
                        
                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                            <div className="form-group">
                                <label className="form-label">Spirit Type</label>
                                <select
                                    className="form-input"
                                    value={formData.spirit_type}
                                    onChange={(e) => setFormData(prev => ({ ...prev, spirit_type: e.target.value }))}
                                    required
                                >
                                    <option value="">Select spirit</option>
                                    {mockSettings.spirit_types.map(spirit => (
                                        <option key={spirit} value={spirit}>{spirit}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">Glass Type</label>
                                <select
                                    className="form-input"
                                    value={formData.glass_type}
                                    onChange={(e) => setFormData(prev => ({ ...prev, glass_type: e.target.value }))}
                                >
                                    <option value="">Select glass</option>
                                    {mockSettings.glass_types.map(glass => (
                                        <option key={glass} value={glass}>{glass}</option>
                                    ))}
                                </select>
                            </div>
                        </div>
                        
                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                            <div className="form-group">
                                <label className="form-label">Venue</label>
                                <select
                                    className="form-input"
                                    value={formData.venue}
                                    onChange={(e) => setFormData(prev => ({ ...prev, venue: e.target.value }))}
                                >
                                    <option value="">Select venue</option>
                                    {mockSettings.venues.map(venue => (
                                        <option key={venue} value={venue}>{venue}</option>
                                    ))}
                                </select>
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">ABV (%)</label>
                                <input
                                    type="number"
                                    className="form-input"
                                    value={formData.abv}
                                    onChange={(e) => setFormData(prev => ({ ...prev, abv: e.target.value }))}
                                />
                            </div>
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Pour Cost ($)</label>
                            <input
                                type="number"
                                step="0.01"
                                className="form-input"
                                value={formData.pour_cost}
                                onChange={(e) => setFormData(prev => ({ ...prev, pour_cost: e.target.value }))}
                            />
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Ingredients</label>
                            {formData.ingredients.map((ing, index) => (
                                <div key={index} style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                    <input
                                        type="text"
                                        placeholder="Ingredient name"
                                        className="form-input"
                                        value={ing.name}
                                        onChange={(e) => updateIngredient(index, 'name', e.target.value)}
                                    />
                                    <input
                                        type="number"
                                        placeholder="Amount"
                                        className="form-input"
                                        style={{ width: '100px' }}
                                        value={ing.amount}
                                        onChange={(e) => updateIngredient(index, 'amount', e.target.value)}
                                    />
                                    <select
                                        className="form-input"
                                        style={{ width: '100px' }}
                                        value={ing.unit}
                                        onChange={(e) => updateIngredient(index, 'unit', e.target.value)}
                                    >
                                        <option value="ml">ml</option>
                                        <option value="oz">oz</option>
                                        <option value="dash">dash</option>
                                        <option value="piece">piece</option>
                                    </select>
                                    <button
                                        type="button"
                                        className="button button-secondary"
                                        onClick={() => removeIngredient(index)}
                                        disabled={formData.ingredients.length === 1}
                                    >
                                        ✕
                                    </button>
                                </div>
                            ))}
                            <button type="button" className="button button-secondary" onClick={addIngredient}>
                                + Add Ingredient
                            </button>
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Instructions</label>
                            <textarea
                                className="form-textarea"
                                value={formData.instructions}
                                onChange={(e) => setFormData(prev => ({ ...prev, instructions: e.target.value }))}
                                required
                            />
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Notes</label>
                            <textarea
                                className="form-textarea"
                                value={formData.notes}
                                onChange={(e) => setFormData(prev => ({ ...prev, notes: e.target.value }))}
                            />
                        </div>
                        
                        <div className="buttons-row">
                            <button type="button" className="button button-secondary" onClick={onBack}>
                                Cancel
                            </button>
                            <button type="submit" className="button">
                                Create Cocktail
                            </button>
                        </div>
                    </form>
                </div>
            );
        }
        
        // Syrups Page Component
        function SyrupsPage({ onSyrupClick, onCreateSyrup, onDeleteSyrup, isAdmin }) {
            const [searchQuery, setSearchQuery] = useState('');
            
            const filteredSyrups = mockSyrups.filter(syrup =>
                syrup.name.toLowerCase().includes(searchQuery.toLowerCase())
            );
            
            return (
                <div className="container">
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '2rem' }}>
                        <h1 className="page-title">Syrups & Infusions</h1>
                        {isAdmin && (
                            <button className="button" onClick={onCreateSyrup}>
                                + Add New
                            </button>
                        )}
                    </div>
                    
                    <div className="search-section">
                        <input
                            type="text"
                            className="search-box"
                            placeholder="Search syrups and infusions..."
                            value={searchQuery}
                            onChange={(e) => setSearchQuery(e.target.value)}
                        />
                    </div>
                    
                    {filteredSyrups.length === 0 ? (
                        <div className="loading">
                            <p>No syrups or infusions found.</p>
                        </div>
                    ) : (
                        <div className="recipes-grid">
                            {filteredSyrups.map(syrup => (
                                <div 
                                    key={syrup.id} 
                                    className="recipe-card"
                                    onClick={() => onSyrupClick(syrup)}
                                >
                                    {isAdmin && (
                                        <button 
                                            className="delete-overlay"
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                onDeleteSyrup(syrup.id);
                                            }}
                                            title="Delete syrup"
                                        >
                                            Delete
                                        </button>
                                    )}
                                    <div 
                                        className="recipe-image"
                                        style={{ 
                                            backgroundImage: syrup.image_url ? `url(${syrup.image_url})` : 'none'
                                        }}
                                    >
                                        {!syrup.image_url && '🧪'}
                                    </div>
                                    <div className="recipe-info">
                                        <div className="recipe-name">{syrup.name}</div>
                                        <div className="recipe-spirit">${syrup.cost}</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }
        
        // View Syrup Page Component
        function ViewSyrupPage({ syrup, onBack, isAdmin, onDeleteSyrup }) {
            if (!syrup) {
                return (
                    <div className="container">
                        <button className="button button-secondary" onClick={onBack}>← Back</button>
                        <div className="loading">Syrup not found</div>
                    </div>
                );
            }
            
            return (
                <div className="container">
                    <div style={{ display: 'flex', gap: '1rem', alignItems: 'center', marginBottom: '1rem' }}>
                        <button className="button button-secondary" onClick={onBack}>← Back to Syrups</button>
                        {isAdmin && (
                            <button 
                                className="button"
                                style={{ background: '#ff4444' }}
                                onClick={() => onDeleteSyrup(syrup.id)}
                            >
                                Delete Syrup
                            </button>
                        )}
                    </div>
                    
                    <div style={{ marginTop: '2rem', background: '#1A1A1A', padding: '2rem', borderRadius: '10px', border: '1px solid #333' }}>
                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 2fr', gap: '2rem', marginBottom: '2rem' }}>
                            <div>
                                <div 
                                    className="recipe-image"
                                    style={{ 
                                        backgroundImage: syrup.image_url ? `url(${syrup.image_url})` : 'none',
                                        height: '300px',
                                        borderRadius: '8px'
                                    }}
                                >
                                    {!syrup.image_url && '🧪'}
                                </div>
                            </div>
                            <div>
                                <h1 style={{ fontSize: '2.5rem', marginBottom: '1rem', color: '#FFB366' }}>{syrup.name}</h1>
                                
                                <div style={{ marginBottom: '2rem' }}>
                                    <strong style={{ color: '#FFB366', fontSize: '1.5rem' }}>
                                        Cost: ${syrup.cost}
                                    </strong>
                                </div>
                                
                                <button className="button button-secondary" onClick={() => {
                                    const text = `Syrup: ${syrup.name}\nCost: $${syrup.cost}\n\nIngredients:\n${syrup.ingredients.map(ing => `• ${ing.amount}${ing.unit} ${ing.name}`).join('\n')}\n\nInstructions:\n${syrup.instructions}`;
                                    navigator.clipboard.writeText(text);
                                    alert('Syrup recipe copied to clipboard!');
                                }}>
                                    Share Recipe
                                </button>
                            </div>
                        </div>
                        
                        <div style={{ marginBottom: '2rem' }}>
                            <h2 style={{ color: '#FFB366', marginBottom: '1rem' }}>Ingredients</h2>
                            <div style={{ background: '#333', padding: '1rem', borderRadius: '6px' }}>
                                {syrup.ingredients.map((ing, index) => (
                                    <div key={index} style={{ padding: '0.25rem 0' }}>
                                        • {ing.amount} {ing.unit} {ing.name}
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        <div style={{ marginBottom: '2rem' }}>
                            <h2 style={{ color: '#FFB366', marginBottom: '1rem' }}>Instructions</h2>
                            <div style={{ background: '#333', padding: '1rem', borderRadius: '6px', whiteSpace: 'pre-line' }}>
                                {syrup.instructions}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        
        // Create Syrup Page Component
        function CreateSyrupPage({ onBack, onSave }) {
            const [formData, setFormData] = useState({
                name: '',
                cost: '',
                image_url: '',
                ingredients: [{ name: '', amount: '', unit: 'g' }],
                instructions: ''
            });
            
            const [imageFile, setImageFile] = useState(null);
            
            const handleImageUpload = async (event) => {
                const file = event.target.files[0];
                if (file) {
                    setImageFile(file);
                    try {
                        const base64 = await convertImageToBase64(file);
                        setFormData(prev => ({ ...prev, image_url: base64 }));
                    } catch (error) {
                        console.error('Error converting image:', error);
                        alert('Error uploading image');
                    }
                }
            };
            
            const addIngredient = () => {
                setFormData(prev => ({
                    ...prev,
                    ingredients: [...prev.ingredients, { name: '', amount: '', unit: 'g' }]
                }));
            };
            
            const updateIngredient = (index, field, value) => {
                setFormData(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.map((ing, i) => 
                        i === index ? { ...ing, [field]: value } : ing
                    )
                }));
            };
            
            const removeIngredient = (index) => {
                setFormData(prev => ({
                    ...prev,
                    ingredients: prev.ingredients.filter((_, i) => i !== index)
                }));
            };
            
            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(formData);
            };
            
            return (
                <div className="container">
                    <button className="button button-secondary" onClick={onBack}>← Back</button>
                    
                    <form className="form" onSubmit={handleSubmit}>
                        <h1 className="page-title">Create New Syrup/Infusion</h1>
                        
                        <div className="form-group">
                            <label className="form-label">Image</label>
                            <div className="image-upload">
                                <input
                                    type="file"
                                    accept="image/*"
                                    onChange={handleImageUpload}
                                    style={{ display: 'none' }}
                                    id="syrup-image-upload"
                                />
                                <label htmlFor="syrup-image-upload" style={{ cursor: 'pointer' }}>
                                    {formData.image_url ? (
                                        <img 
                                            src={formData.image_url} 
                                            alt="Preview" 
                                            className="image-preview"
                                        />
                                    ) : (
                                        <div>
                                            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>📷</div>
                                            <p>Click to upload an image</p>
                                            <p style={{ fontSize: '0.9rem', color: '#666' }}>
                                                or paste image URL below
                                            </p>
                                        </div>
                                    )}
                                </label>
                            </div>
                            <input
                                type="text"
                                className="form-input"
                                style={{ marginTop: '1rem' }}
                                placeholder="Or enter image URL..."
                                value={formData.image_url}
                                onChange={(e) => setFormData(prev => ({ ...prev, image_url: e.target.value }))}
                            />
                        </div>
                        
                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>
                            <div className="form-group">
                                <label className="form-label">Name</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    value={formData.name}
                                    onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
                                    required
                                />
                            </div>
                            
                            <div className="form-group">
                                <label className="form-label">Total Cost ($)</label>
                                <input
                                    type="number"
                                    step="0.01"
                                    className="form-input"
                                    value={formData.cost}
                                    onChange={(e) => setFormData(prev => ({ ...prev, cost: e.target.value }))}
                                    required
                                />
                            </div>
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Ingredients</label>
                            {formData.ingredients.map((ing, index) => (
                                <div key={index} style={{ display: 'flex', gap: '0.5rem', marginBottom: '0.5rem' }}>
                                    <input
                                        type="text"
                                        placeholder="Ingredient name"
                                        className="form-input"
                                        value={ing.name}
                                        onChange={(e) => updateIngredient(index, 'name', e.target.value)}
                                    />
                                    <input
                                        type="number"
                                        placeholder="Amount"
                                        className="form-input"
                                        style={{ width: '100px' }}
                                        value={ing.amount}
                                        onChange={(e) => updateIngredient(index, 'amount', e.target.value)}
                                    />
                                    <select
                                        className="form-input"
                                        style={{ width: '100px' }}
                                        value={ing.unit}
                                        onChange={(e) => updateIngredient(index, 'unit', e.target.value)}
                                    >
                                        <option value="g">g</option>
                                        <option value="ml">ml</option>
                                        <option value="piece">piece</option>
                                    </select>
                                    <button
                                        type="button"
                                        className="button button-secondary"
                                        onClick={() => removeIngredient(index)}
                                        disabled={formData.ingredients.length === 1}
                                    >
                                        ✕
                                    </button>
                                </div>
                            ))}
                            <button type="button" className="button button-secondary" onClick={addIngredient}>
                                + Add Ingredient
                            </button>
                        </div>
                        
                        <div className="form-group">
                            <label className="form-label">Instructions</label>
                            <textarea
                                className="form-textarea"
                                value={formData.instructions}
                                onChange={(e) => setFormData(prev => ({ ...prev, instructions: e.target.value }))}
                                required
                            />
                        </div>
                        
                        <div className="buttons-row">
                            <button type="button" className="button button-secondary" onClick={onBack}>
                                Cancel
                            </button>
                            <button type="submit" className="button">
                                Create Syrup
                            </button>
                        </div>
                    </form>
                </div>
            );
        }
        
        // Settings Page Component
        function SettingsPage({ onBack, isAdmin }) {
            const [settings, setSettings] = useState(mockSettings);
            
            const updateSettings = (key, value) => {
                const updated = { ...settings, [key]: value };
                setSettings(updated);
                mockSettings = updated;
            };
            
            return (
                <div className="container">
                    <button className="button button-secondary" onClick={onBack}>← Back</button>
                    <h1 className="page-title">Settings</h1>
                    
                    <div className="settings-grid">
                        <ListManager
                            title="Spirit Types"
                            items={settings.spirit_types}
                            onUpdate={(items) => updateSettings('spirit_types', items)}
                            placeholder="Add new spirit type..."
                            canEdit={isAdmin}
                        />
                        
                        <ListManager
                            title="Glass Types"
                            items={settings.glass_types}
                            onUpdate={(items) => updateSettings('glass_types', items)}
                            placeholder="Add new glass type..."
                            canEdit={isAdmin}
                        />
                        
                        <ListManager
                            title="Venues"
                            items={settings.venues}
                            onUpdate={(items) => updateSettings('venues', items)}
                            placeholder="Add new venue..."
                            canEdit={isAdmin}
                        />
                    </div>
                </div>
            );
        }
        
        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
